<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Barangay</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script>
      function previewImage() {
        const file = document.getElementById("imageInput").files[0];
        const preview = document.getElementById("imagePreview");
        const reader = new FileReader();

        reader.onloadend = function () {
          preview.innerHTML = `<img src="${reader.result}" alt="Image Preview" style="max-width: 100px; max-height: 100px;" />`;
        };

        if (file) {
          reader.readAsDataURL(file);
        } else {
          preview.innerHTML = "";
        }
      }

      function validateForm(event) {
        const voterStatus = document.querySelectorAll('input[name="voter_status"]:checked');
        if (voterStatus.length > 1) {
          alert("Please select only one Voter Status.");
          event.preventDefault();
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("imageInput").addEventListener("change", previewImage);
        document.querySelector("form").addEventListener("submit", validateForm);
      });
    </script>
  </head>
<body>

  <div class="card residencePage">
    <form action="db.php" method="post">
      <h1>NEW RESIDENCE</h1>
      <br />

      Upload your Photo:
      <input type="file" id="imageInput" />
      <div id="imagePreview"></div>
      <br />
      <br />
      Last Name: <input type="text" name="last_name" id="txtResLName" required />
      <br />
      First Name: <input type="text" name="first_name" id="txtResFName" required />
      <br />
      Middle Name: <input type="text" name="middle_name" id="txtResMName" required />
      <br />
      Sex:
      <input type="radio" name="sex" value="Male" required />MALE
      <input type="radio" name="sex" value="Female" required />FEMALE
      <br /><br />
      Marital Status:
      <select id="maritalStatus" name="marital_status" required>
        <option value="Single">Single</option>
        <option value="Married">Married</option>
        <option value="Widowed">Widowed</option>
        <option value="Separated">Separated</option>
        <option value="Divorced">Divorced</option>
      </select>
      <br />
      Address: <input type="text" name="address" id="txtResAddress" required />
      <br />
      Employment Status:
      <input type="radio" name="employment_status" value="Employed" required />EMPLOYED
      <input type="radio" name="employment_status" value="Unemployed" required />UNEMPLOYED
      <br /><br />
      Birth Date: <input type="date" name="birth_date" id="ResBirthDate" required />
      <br />
      Place of Birth: <input type="text" name="place_of_birth" id="txtResBirthPlace" required />
      <br />
      Age: <input type="number" name="age" id="age" required />
      <br />
      Religion: <input type="text" name="religion" id="txtResReligion" required />
      <br />
      Voter Status:
      <input type="checkbox" id="voterStatusActive" name="voter_status" value="Active" />ACTIVE
      <input type="checkbox" id="voterStatusInactive" name="voter_status" value="Inactive" />INACTIVE
      <br /><br />
      <button id="btnsaveInfo" name="save">Save</button>
      <button type="button" id="btnupdateInfo">Update</button>
      <button type="button" id="btndeleteInfo">Delete</button>
      <button type="button" id="btnclearAll">Clear All Records</button>
      <br /><br />
    </form>

    <table id="residentsTable">
      <thead>
        <tr>
          <th>Last Name</th>
          <th>First Name</th>
          <th>Middle Name</th>
          <th>Sex</th>
          <th>Marital Status</th>
          <th>Address</th>
          <th>Employment Status</th>
          <th>Birth Date</th>
          <th>Place of Birth</th>
          <th>Age</th>
          <th>Religion</th>
          <th>Voter Status</th>
        </tr>
      </thead>
      <tbody>
        <!-- Table rows will be dynamically added here -->
      </tbody>
    </table>
  </div>

</body>
</html>
